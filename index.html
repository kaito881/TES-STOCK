<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Stok Gudang App</title>
    <meta name="theme-color" content="#2c3e50">
    
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22Gudang%20Elektronik%22,%22short_name%22:%22StokApp%22,%22start_url%22:%22.%22,%22display%22:%22standalone%22,%22background_color%22:%22#2c3e50%22,%22theme_color%22:%22#2c3e50%22,%22icons%22:[{%22src%22:%22https://cdn-icons-png.flaticon.com/512/2897/2897832.png%22,%22sizes%22:%22512x512%22,%22type%22:%22image/png%22}]}">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --success: #27ae60; --danger: #e74c3c; --bg: #f4f7f6; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); margin: 0; padding: 15px; }
        header { background: linear-gradient(135deg, var(--primary), #4568dc); color: white; padding: 20px; border-radius: 12px; text-align: center; margin-bottom: 15px; }
        header h1 { margin: 0; font-size: 1.2rem; letter-spacing: 1px; margin-bottom: 12px; }
        .stats-bar { display: flex; justify-content: center; gap: 10px; background: rgba(255, 255, 255, 0.1); padding: 8px; border-radius: 10px; }
        .stat-item { text-align: center; padding: 0 10px; border-right: 1px solid rgba(255,255,255,0.2); }
        .stat-item:last-child { border-right: none; }
        .stat-val { display: block; font-size: 14px; font-weight: 800; }
        .stat-lbl { font-size: 8px; text-transform: uppercase; opacity: 0.8; }
        .search-container input { width: 100%; padding: 14px; border-radius: 10px; border: 2px solid #ddd; outline: none; font-size: 16px; margin-bottom: 15px; }
        .filter-section { background: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .filter-label { width: 100%; font-size: 10px; font-weight: bold; color: #95a5a6; text-transform: uppercase; text-align: center; margin-bottom: 8px; display: block; }
        .filter-group { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; }
        .btn-filter { padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; background: #fff; font-size: 11px; font-weight: 600; }
        .btn-filter.active { background: var(--accent); color: white; border-color: var(--accent); }
        .list-container { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        td { padding: 12px; border: none; }
        .product-row { border-bottom: 1px solid #f1f1f1; cursor: pointer; }
        .row-habis { background: #f2f2f2; opacity: 0.8; }
        .merek-tag { font-size: 9px; background: #34495e; color: white; padding: 2px 6px; border-radius: 4px; text-transform: uppercase; display: inline-block; margin-bottom: 4px; }
        .harga { font-weight: bold; color: var(--primary); font-size: 14px; }
        .stok-status-wrapper { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .angka-stok { font-weight: 800; font-size: 15px; color: #333; }
        .badge { padding: 4px 8px; border-radius: 6px; font-size: 10px; font-weight: bold; min-width: 55px; text-align: center; }
        .badge-ready { background: #ebf9f1; color: var(--success); border: 1px solid #27ae60; }
        .badge-habis { background: #f8f8f8; color: var(--danger); border: 1px solid #ccc; }
        .desc-content { max-height: 0; overflow: hidden; transition: 0.3s; background: #fdfdfd; }
        .expanded + .desc-row .desc-content { max-height: 100px; padding: 10px 15px; border-bottom: 1px solid #eee; }
        .fab-sort { position: fixed; bottom: 20px; right: 20px; background: var(--primary); color: white; border: none; border-radius: 50px; padding: 12px 20px; font-size: 12px; font-weight: bold; display: none; z-index: 100; }
    </style>
</head>
<body>

<header>
    <h1>GUDANG ELEKTRONIK APP</h1>
    <div class="stats-bar">
        <div class="stat-item"><span class="stat-val" id="stat-total">0</span><span class="stat-lbl">Total</span></div>
        <div class="stat-item" style="color: #2ecc71;"><span class="stat-val" id="stat-ready">0</span><span class="stat-lbl">Ready</span></div>
        <div class="stat-item" style="color: #ff7675;"><span class="stat-val" id="stat-sold">0</span><span class="stat-lbl">Sold</span></div>
    </div>
</header>

<div class="search-container">
    <input type="text" id="inputCari" placeholder="Cari tipe barang..." onkeyup="render()">
</div>

<div class="filter-section">
    <div class="filter-label">Status Barang</div>
    <div class="filter-group">
        <button class="btn-filter btn-stok active" id="stok-semua" onclick="setModeStok('semua')">Semua</button>
        <button class="btn-filter btn-stok" id="stok-ready" onclick="setModeStok('ready')">Ready</button>
        <button class="btn-filter btn-stok" id="stok-habis" onclick="setModeStok('habis')">Habis</button>
    </div>
    <div style="height: 15px;"></div>
    <div class="filter-label">Kategori Produk</div>
    <div id="filterKategori" class="filter-group"></div>
</div>

<div class="list-container">
    <table><tbody id="tempatBarang"></tbody></table>
</div>

<button id="btnSort" class="fab-sort" onclick="gantiUrutan()">⇅ <span id="txtSort">Terbaru</span></button>

<script>
    // --- LOGIKA PWA (INSTALL KE LAYAR UTAMA) ---
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            const swCode = `
                self.addEventListener('install', e => self.skipWaiting());
                self.addEventListener('fetch', e => e.respondWith(fetch(e.request).catch(() => caches.match(e.request))));
            `;
            const blob = new Blob([swCode], { type: 'text/javascript' });
            const swUrl = URL.createObjectURL(blob);
            navigator.serviceWorker.register(swUrl);
        });
    }

    // --- DATA STOK (SESUAI PERMINTAAN: TIDAK DIUBAH) ---
    let modeStok = 'semua';
    let filterSekarang = { kategori: 'Semua' };
    let urutanDesc = true;

    const gudangData = [
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 7kg G", h: "1.375.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 8kg B", h: "1.475.000", s: 0, t: "2-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 9kg Y", h: "1.625.000", s: 0, t: "7-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 9kg 81 V", h: "1.700.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 9kg 81Y", h: "1.700.000", s: 0, t: "7-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 10kg Y", h: "1.840.000", s: 0, t: "6-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 10kg 81 V", h: "1.900.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 12kg X", h: "2.225.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 14kg B", h: "2.340.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Sharp", n: "Mesin Cuci Sharp ES-T 1490WA-RD", h: "2.980.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Toshiba", n: "Mesin Cuci Toshiba VH-H95MN-WB", h: "1.700.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron PAW 8029TS", h: "2.375.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron PAW 9029TS", h: "2.600.000", s: 0, t: "5-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron PAW 1029TY", h: "2.875.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 159 R", h: "1.675.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 159 B", h: "1.675.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 179 R", h: "1.825.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 177 LB", h: "1.825.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 187 TY", h: "1.925.000", s: 0, t: "4-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 187 PR", h: "1.925.000", s: 0, t: "4-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 15 DMY", h: "1.725.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 16 DRX", h: "1.825.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 16 DRD", h: "1.825.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 DRD", h: "2.065.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 DRX", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 MNX", h: "2.065.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 MOW", h: "2.065.000", s: 0, t: "3-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 MOB", h: "2.065.000", s: 0, t: "3-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 DMY", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18DMR", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 MTR", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp SJ-X 165 MD (GD)", h: "1.725.000", s: 1, t: ""},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp SJ-N 192 D (VB)", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp SJ-X 197W-DW", h: "2.225.000", s: 1, t: ""},
        {k: "Kulkas", m: "Toshiba", n: "Kulkas Toshiba GR-RD196CC - DMF", h: "1.900.000", s: 1, t: ""},
        {k: "Kulkas", m: "Toshiba", n: "Kulkas Toshiba GR-RD235CC - DMF", h: "1.975.000", s: 1, t: ""},
        {k: "Kulkas", m: "Aqua", n: "Kulkas Aqua AQR-D185 MDS", h: "1.725.000", s: 1, t: ""},
        {k: "Kulkas", m: "Aqua", n: "Kulkas Aqua AQR-D205 MDS", h: "1.825.000", s: 1, t: ""},
        {k: "Kulkas", m: "LG", n: "Kulkas LG GN -Y201CLAR", h: "2.300.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 200 Y", h: "2.600.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 20 CRD", h: "2.675.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 20 CLD", h: "2.675.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 21DMY", h: "2.850.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 21DRD3", h: "2.850.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 23 MNX", h: "2.975.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 25 MNX", h: "3.150.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 29 HB", h: "3.600.000", s: 0, t: "1-2-26"},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp 2p SJ 197 ND", h: "2.725.000", s: 1, t: ""},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp 2p SJ 236 MG(GR)", h: "3.030.000", s: 0, t: "2-2-26"},
        {k: "Kulkas", m: "LG", n: "Kulkas LG 2p GN - B202SQIR", h: "3.400.000", s: 1, t: ""},
        {k: "Kulkas", m: "Toshiba", n: "Kulkas Toshiba 2p GR-B28ISP", h: "3.075.000", s: 1, t: ""},
        {k: "Kulkas", m: "Samsung", n: "Kulkas Samsung 2p RT19M300BGE", h: "3.575.000", s: 1, t: ""},
        {k: "Freezer", m: "Artugo", n: "Freezer Artugo CF101CN", h: "1.850.000", s: 0, t: "7-2-26"},
        {k: "Freezer", m: "Artugo", n: "Freezer Artugo CF201CN", h: "2.455.000", s: 0, t: "7-2-26"},
        {k: "Freezer", m: "TCL", n: "Freezer TCL TCF201ZID", h: "2.410.000", s: 1, t: ""},
        {k: "Freezer", m: "TCL", n: "Freezer TCL TCF100ZID", h: "1.860.000", s: 0, t: "5-2-26"},
        {k: "Freezer", m: "Polytron", n: "Freezer Box Polytron PC318", h: "3.250.000", s: 1, t: ""},
        {k: "Dapur", m: "Miyako", n: "Magic com Miyako MCM-609", h: "215.000", s: 1, t: ""},
        {k: "Dapur", m: "Miyako", n: "Magic com Miyako MCM 508", h: "245.000", s: 2, t: ""},
        {k: "Dapur", m: "Miyako", n: "Magic com Miyako MCM 508 SBC", h: "275.000", s: 2, t: ""},
        {k: "Dapur", m: "Miyako", n: "Magic com Miyako MCM 528 MIX FRUITS", h: "245.000", s: 3, t: ""},
        {k: "Dapur", m: "Philips", n: "Magic com Philips", h: "425.000", s: 2, t: ""},
        {k: "Dapur", m: "Cosmos", n: "Magic com Cosmos CRJ- 3232", h: "290.000", s: 4, t: ""},
        {k: "Dapur", m: "Lainnya", n: "Blender BL 101 PL", h: "200.000", s: 3, t: ""},
        {k: "Dapur", m: "Rinnai", n: "Kompor Rinnai RI 602 A", h: "525.000", s: 1, t: ""},
        {k: "Dapur", m: "Rinnai", n: "Kompor Rinnai RI 522 CE", h: "370.000", s: 1, t: ""},
        {k: "Dapur", m: "Rinnai", n: "Kompor Rinnai RI 522 E", h: "415.000", s: 2, t: ""},
        {k: "Dapur", m: "Rinnai", n: "Kompor Rinnai RI 712T", h: "660.000", s: 2, t: ""},
        {k: "Lainnya", m: "Cosmos", n: "Setrika Cosmos cis -318 f1", h: "150.000", s: 1, t: ""},
        {k: "Lainnya", m: "Lainnya", n: "Roda kulkas besi", h: "85.000", s: 4, t: ""},
        {k: "Lainnya", m: "Lainnya", n: "Hand Mixer Hm-620", h: "180.000", s: 1, t: ""},
        {k: "Lainnya", m: "Welhome", n: "Water Heater Welhome", h: "850.000", s: 1, t: ""},
        {k: "TV", m: "Coocaa", n: "TV Coocaa 32S3U", h: "1.650.000", s: 1, t: ""},
        {k: "TV", m: "Polytron", n: "TV Polytron PLD40 CV8969", h: "2.625.000", s: 1, t: ""},
        {k: "Lainnya", m: "Lainnya", n: "Kipas KAD927BGB", h: "175.000", s: 1, t: ""},
        {k: "Lainnya", m: "Lainnya", n: "Bracket TV", h: "65.000", s: 2, t: ""}
    ];

    // --- FUNGSI APP (TIDAK BERUBAH) ---
    function toggleDesc(id) { document.getElementById('row-' + id).classList.toggle('expanded'); }
    function setModeStok(m) { 
        modeStok = m; 
        document.querySelectorAll('.btn-stok').forEach(b => b.classList.remove('active'));
        document.getElementById('stok-'+m).classList.add('active');
        document.getElementById('btnSort').style.display = (m === 'habis') ? 'flex' : 'none';
        render(); 
    }
    function setFilter(j, n) { filterSekarang[j] = n; render(); initFilters(); }
    function gantiUrutan() { urutanDesc = !urutanDesc; document.getElementById('txtSort').innerText = urutanDesc ? "Terbaru" : "Terlama"; render(); }
    function parseTgl(t) { if(!t) return 0; const p = t.split('-'); return new Date(`20${p[2]}`, p[1]-1, p[0]).getTime(); }
    function formatTgl(t) { if(!t) return "-"; const p = t.split('-'); return `${p[0]} ${["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"][p[1]-1]} 20${p[2]}`; }

    function render() {
        const wadah = document.getElementById('tempatBarang');
        const cari = document.getElementById('inputCari').value.toLowerCase();
        let list = gudangData.filter(i => {
            return (filterSekarang.kategori==='Semua' || i.k===filterSekarang.kategori) &&
                   (i.n.toLowerCase().includes(cari) || i.m.toLowerCase().includes(cari)) &&
                   (modeStok==='semua' || (modeStok==='ready' ? i.s>0 : i.s<=0));
        });

        list.sort((a,b) => {
            if (modeStok === 'habis') return urutanDesc ? parseTgl(b.t) - parseTgl(a.t) : parseTgl(a.t) - parseTgl(b.t);
            const prioritas = {"Kulkas": 1, "Mesin Cuci": 2};
            const pA = prioritas[a.k] || 99;
            const pB = prioritas[b.k] || 99;
            if (pA !== pB) return pA - pB;
            return (b.s > 0 ? 1 : 0) - (a.s > 0 ? 1 : 0);
        });

        document.getElementById('stat-total').innerText = list.length;
        document.getElementById('stat-ready').innerText = list.filter(x=>x.s>0).length;
        document.getElementById('stat-sold').innerText = list.filter(x=>x.s<=0).length;

        wadah.innerHTML = list.map((i, idx) => `
            <tr id="row-${idx}" class="product-row ${i.s<=0?'row-habis':''}" onclick="toggleDesc(${idx})">
                <td style="width:55%"><span class="merek-tag">${i.m}</span><br><strong>${i.n}</strong></td>
                <td style="width:25%; text-align:right" class="harga">Rp ${i.h}</td>
                <td style="width:20%; text-align:right">
                    <div class="stok-status-wrapper"><span class="angka-stok">${i.s}</span>
                    <span class="badge ${i.s<=0?'badge-habis':'badge-ready'}">${i.s<=0?'SOLD':'READY'}</span></div>
                </td>
            </tr>
            <tr class="desc-row"><td colspan="3" style="padding:0"><div class="desc-content"><div style="padding:10px 15px; background:#f9f9f9;">
                Kategori: ${i.k}<br>${i.s<=0 ? 'Habis tgl: '+formatTgl(i.t) : 'Stok Ready.'}
            </div></div></td></tr>`).join('');
    }

    function initFilters() {
        const kats = ['Semua', ...new Set(gudangData.map(i => i.k))];
        document.getElementById('filterKategori').innerHTML = kats.map(k => 
            `<button class="btn-filter ${filterSekarang.kategori===k?'active':''}" onclick="setFilter('kategori','${k}')">${k}</button>`).join('');
    }
    initFilters(); render();
</script>
</body>
</html>
        <button class="btn-filter btn-stok" id="stok-habis" onclick="setModeStok('habis')">Habis</button>
    </div>
    <div style="height: 15px;"></div>
    <div class="filter-label">Kategori Produk</div>
    <div id="filterKategori" class="filter-group"></div>
</div>

<div class="list-container">
    <table><tbody id="tempatBarang"></tbody></table>
</div>

<button id="btnSort" class="fab-sort" onclick="gantiUrutan()">⇅ <span id="txtSort">Terbaru</span></button>

<script>
    // --- PWA SERVICE WORKER REGISTRATION ---
    if ('serviceWorker' in navigator) {
        const swCode = `self.addEventListener('fetch', function(e) { e.respondWith(fetch(e.request).catch(() => caches.match(e.request))); });`;
        const blob = new Blob([swCode], { type: 'text/javascript' });
        const swUrl = URL.createObjectURL(blob);
        navigator.serviceWorker.register(swUrl);
    }

    // --- APP LOGIC ---
    let modeStok = 'semua';
    let filterSekarang = { kategori: 'Semua' };
    let urutanDesc = true;

    const gudangData = [
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 7kg G", h: "1.375.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 8kg B", h: "1.475.000", s: 0, t: "2-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 9kg Y", h: "1.625.000", s: 0, t: "7-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 9kg 81 V", h: "1.700.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 9kg 81Y", h: "1.700.000", s: 0, t: "7-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 10kg Y", h: "1.840.000", s: 0, t: "6-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 10kg 81 V", h: "1.900.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 12kg X", h: "2.225.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron 14kg B", h: "2.340.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Sharp", n: "Mesin Cuci Sharp ES-T 1490WA-RD", h: "2.980.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Toshiba", n: "Mesin Cuci Toshiba VH-H95MN-WB", h: "1.700.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron PAW 8029TS", h: "2.375.000", s: 1, t: ""},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron PAW 9029TS", h: "2.600.000", s: 0, t: "5-2-26"},
        {k: "Mesin Cuci", m: "Polytron", n: "Mesin Cuci Polytron PAW 1029TY", h: "2.875.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 159 R", h: "1.675.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 159 B", h: "1.675.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 179 R", h: "1.825.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 177 LB", h: "1.825.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 187 TY", h: "1.925.000", s: 0, t: "4-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 187 PR", h: "1.925.000", s: 0, t: "4-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 15 DMY", h: "1.725.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 16 DRX", h: "1.825.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 16 DRD", h: "1.825.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 DRD", h: "2.065.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 DRX", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 MNX", h: "2.065.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 MOW", h: "2.065.000", s: 0, t: "3-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 MOB", h: "2.065.000", s: 0, t: "3-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 DMY", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18DMR", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 18 MTR", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp SJ-X 165 MD (GD)", h: "1.725.000", s: 1, t: ""},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp SJ-N 192 D (VB)", h: "2.065.000", s: 1, t: ""},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp SJ-X 197W-DW", h: "2.225.000", s: 1, t: ""},
        {k: "Kulkas", m: "Toshiba", n: "Kulkas Toshiba GR-RD196CC - DMF", h: "1.900.000", s: 1, t: ""},
        {k: "Kulkas", m: "Toshiba", n: "Kulkas Toshiba GR-RD235CC - DMF", h: "1.975.000", s: 1, t: ""},
        {k: "Kulkas", m: "Aqua", n: "Kulkas Aqua AQR-D185 MDS", h: "1.725.000", s: 1, t: ""},
        {k: "Kulkas", m: "Aqua", n: "Kulkas Aqua AQR-D205 MDS", h: "1.825.000", s: 1, t: ""},
        {k: "Kulkas", m: "LG", n: "Kulkas LG GN -Y201CLAR", h: "2.300.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 200 Y", h: "2.600.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 20 CRD", h: "2.675.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 20 CLD", h: "2.675.000", s: 0, t: "7-2-26"},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 21DMY", h: "2.850.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 2p 21DRD3", h: "2.850.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 23 MNX", h: "2.975.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 25 MNX", h: "3.150.000", s: 1, t: ""},
        {k: "Kulkas", m: "Polytron", n: "Kulkas Polytron 29 HB", h: "3.600.000", s: 0, t: "1-2-26"},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp 2p SJ 197 ND", h: "2.725.000", s: 1, t: ""},
        {k: "Kulkas", m: "Sharp", n: "Kulkas Sharp 2p SJ 236 MG(GR)", h: "3.030.000", s: 0, t: "2-2-26"},
        {k: "Kulkas", m: "LG", n: "Kulkas LG 2p GN - B202SQIR", h: "3.400.000", s: 1, t: ""},
        {k: "Kulkas", m: "Toshiba", n: "Kulkas Toshiba 2p GR-B28ISP", h: "3.075.000", s: 1, t: ""},
        {k: "Kulkas", m: "Samsung", n: "Kulkas Samsung 2p RT19M300BGE", h: "3.575.000", s: 1, t: ""},
        {k: "Freezer", m: "Artugo", n: "Freezer Artugo CF101CN", h: "1.850.000", s: 0, t: "7-2-26"},
        {k: "Freezer", m: "Artugo", n: "Freezer Artugo CF201CN", h: "2.455.000", s: 0, t: "7-2-26"},
        {k: "Freezer", m: "TCL", n: "Freezer TCL TCF201ZID", h: "2.410.000", s: 1, t: ""},
        {k: "Freezer", m: "TCL", n: "Freezer TCL TCF100ZID", h: "1.860.000", s: 0, t: "5-2-26"},
        {k: "Freezer", m: "Polytron", n: "Freezer Box Polytron PC318", h: "3.250.000", s: 1, t: ""},
        {k: "Dapur", m: "Miyako", n: "Magic com Miyako MCM-609", h: "215.000", s: 1, t: ""},
        {k: "Dapur", m: "Miyako", n: "Magic com Miyako MCM 508", h: "245.000", s: 2, t: ""},
        {k: "Dapur", m: "Miyako", n: "Magic com Miyako MCM 508 SBC", h: "275.000", s: 2, t: ""},
        {k: "Dapur", m: "Miyako", n: "Magic com Miyako MCM 528 MIX FRUITS", h: "245.000", s: 3, t: ""},
        {k: "Dapur", m: "Philips", n: "Magic com Philips", h: "425.000", s: 2, t: ""},
        {k: "Dapur", m: "Cosmos", n: "Magic com Cosmos CRJ- 3232", h: "290.000", s: 4, t: ""},
        {k: "Dapur", m: "Lainnya", n: "Blender BL 101 PL", h: "200.000", s: 3, t: ""},
        {k: "Dapur", m: "Rinnai", n: "Kompor Rinnai RI 602 A", h: "525.000", s: 1, t: ""},
        {k: "Dapur", m: "Rinnai", n: "Kompor Rinnai RI 522 CE", h: "370.000", s: 1, t: ""},
        {k: "Dapur", m: "Rinnai", n: "Kompor Rinnai RI 522 E", h: "415.000", s: 2, t: ""},
        {k: "Dapur", m: "Rinnai", n: "Kompor Rinnai RI 712T", h: "660.000", s: 2, t: ""},
        {k: "Lainnya", m: "Cosmos", n: "Setrika Cosmos cis -318 f1", h: "150.000", s: 1, t: ""},
        {k: "Lainnya", m: "Lainnya", n: "Roda kulkas besi", h: "85.000", s: 4, t: ""},
        {k: "Lainnya", m: "Lainnya", n: "Hand Mixer Hm-620", h: "180.000", s: 1, t: ""},
        {k: "Lainnya", m: "Welhome", n: "Water Heater Welhome", h: "850.000", s: 1, t: ""},
        {k: "TV", m: "Coocaa", n: "TV Coocaa 32S3U", h: "1.650.000", s: 1, t: ""},
        {k: "TV", m: "Polytron", n: "TV Polytron PLD40 CV8969", h: "2.625.000", s: 1, t: ""},
        {k: "Lainnya", m: "Lainnya", n: "Kipas KAD927BGB", h: "175.000", s: 1, t: ""},
        {k: "Lainnya", m: "Lainnya", n: "Bracket TV", h: "65.000", s: 2, t: ""}
    ];

    function toggleDesc(id) { document.getElementById('row-' + id).classList.toggle('expanded'); }
    function setModeStok(m) { 
        modeStok = m; 
        document.querySelectorAll('.btn-stok').forEach(b => b.classList.remove('active'));
        document.getElementById('stok-'+m).classList.add('active');
        document.getElementById('btnSort').style.display = (m === 'habis') ? 'flex' : 'none';
        render(); 
    }
    function setFilter(j, n) { filterSekarang[j] = n; render(); initFilters(); }
    function gantiUrutan() { urutanDesc = !urutanDesc; document.getElementById('txtSort').innerText = urutanDesc ? "Terbaru" : "Terlama"; render(); }
    function parseTgl(t) { if(!t) return 0; const p = t.split('-'); return new Date(`20${p[2]}`, p[1]-1, p[0]).getTime(); }
    function formatTgl(t) { if(!t) return "-"; const p = t.split('-'); return `${p[0]} ${["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"][p[1]-1]} 20${p[2]}`; }

    function render() {
        const wadah = document.getElementById('tempatBarang');
        const cari = document.getElementById('inputCari').value.toLowerCase();
        let list = gudangData.filter(i => {
            return (filterSekarang.kategori==='Semua' || i.k===filterSekarang.kategori) &&
                   (i.n.toLowerCase().includes(cari) || i.m.toLowerCase().includes(cari)) &&
                   (modeStok==='semua' || (modeStok==='ready' ? i.s>0 : i.s<=0));
        });

        list.sort((a,b) => {
            if (modeStok === 'habis') return urutanDesc ? parseTgl(b.t) - parseTgl(a.t) : parseTgl(a.t) - parseTgl(b.t);
            const prioritas = {"Kulkas": 1, "Mesin Cuci": 2};
            const pA = prioritas[a.k] || 99;
            const pB = prioritas[b.k] || 99;
            if (pA !== pB) return pA - pB;
            return (b.s > 0 ? 1 : 0) - (a.s > 0 ? 1 : 0);
        });

        document.getElementById('stat-total').innerText = list.length;
        document.getElementById('stat-ready').innerText = list.filter(x=>x.s>0).length;
        document.getElementById('stat-sold').innerText = list.filter(x=>x.s<=0).length;

        wadah.innerHTML = list.map((i, idx) => `
            <tr id="row-${idx}" class="product-row ${i.s<=0?'row-habis':''}" onclick="toggleDesc(${idx})">
                <td style="width:55%"><span class="merek-tag">${i.m}</span><br><strong>${i.n}</strong></td>
                <td style="width:25%; text-align:right" class="harga">Rp ${i.h}</td>
                <td style="width:20%; text-align:right">
                    <div class="stok-status-wrapper"><span class="angka-stok">${i.s}</span>
                    <span class="badge ${i.s<=0?'badge-habis':'badge-ready'}">${i.s<=0?'SOLD':'READY'}</span></div>
                </td>
            </tr>
            <tr class="desc-row"><td colspan="3" style="padding:0"><div class="desc-content"><div style="padding:10px 15px; background:#f9f9f9;">
                Kategori: ${i.k}<br>${i.s<=0 ? 'Habis tgl: '+formatTgl(i.t) : 'Stok Ready.'}
            </div></div></td></tr>`).join('');
    }

    function initFilters() {
        const kats = ['Semua', ...new Set(gudangData.map(i => i.k))];
        document.getElementById('filterKategori').innerHTML = kats.map(k => 
            `<button class="btn-filter ${filterSekarang.kategori===k?'active':''}" onclick="setFilter('kategori','${k}')">${k}</button>`).join('');
    }
    initFilters(); render();
</script>
</body>
</html>
